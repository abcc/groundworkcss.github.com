// Generated by CoffeeScript 1.4.0
/*
 * jQuery Orbit Plugin 1.4.0
 * www.ZURB.com/playground
 * Copyright 2010, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/(function(){var e;(function(t){"use strict";var n;t.fn.findFirstImage=function(){return this.first().find("img").andSelf().filter("img").first()};n={defaults:{animation:"horizontal-push",animationSpeed:600,timer:!0,advanceSpeed:4e3,pauseOnHover:!1,startClockOnMouseOut:!1,startClockOnMouseOutAfter:1e3,directionalNav:!0,directionalNavRightText:"Right",directionalNavLeftText:"Left",captions:!0,captionAnimation:"fade",captionAnimationSpeed:600,resetTimerOnClick:!1,bullets:!1,bulletThumbs:!1,bulletThumbLocation:"",bulletThumbsHideOnSmall:!0,afterSlideChange:t.noop,afterLoadComplete:t.noop,fluid:!0,centerBullets:!0,singleCycle:!1,slideNumber:!1,stackOnSmall:!1},activeSlide:0,numberSlides:0,orbitWidth:null,orbitHeight:null,locked:null,timerRunning:null,degrees:0,wrapperHTML:'<div class="orbit-wrapper" />',timerHTML:'<div class="timer"><span class="mask"><span class="rotator"></span></span><span class="pause"></span></div>',captionHTML:'<div class="orbit-caption"></div>',directionalNavHTML:'<div class="slider-nav hide-for-small"><span class="right"></span><span class="left"></span></div>',bulletHTML:'<ul class="orbit-bullets"></ul>',slideNumberHTML:'<span class="orbit-slide-counter"></span>',init:function(e,n){var r,i,s;r=void 0;i=0;s=this;this.clickTimer=t.proxy(this.clickTimer,this);this.addBullet=t.proxy(this.addBullet,this);this.resetAndUnlock=t.proxy(this.resetAndUnlock,this);this.stopClock=t.proxy(this.stopClock,this);this.startTimerAfterMouseLeave=t.proxy(this.startTimerAfterMouseLeave,this);this.clearClockMouseLeaveTimer=t.proxy(this.clearClockMouseLeaveTimer,this);this.rotateTimer=t.proxy(this.rotateTimer,this);this.options=t.extend({},this.defaults,n);this.options.timer==="false"&&(this.options.timer=!1);this.options.captions==="false"&&(this.options.captions=!1);this.options.directionalNav==="false"&&(this.options.directionalNav=!1);this.$element=t(e);this.$wrapper=this.$element.wrap(this.wrapperHTML).parent();this.$slides=this.$element.children("img, a, div, figure, li");this.$element.on("movestart",function(e){if(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)return e.preventDefault()});this.$element.bind("orbit.next",function(){return s.shift("next")});this.$element.bind("orbit.prev",function(){return s.shift("prev")});this.$element.bind("swipeleft",function(){return t(this).trigger("orbit.next")});this.$element.bind("swiperight",function(){return t(this).trigger("orbit.prev")});this.$element.bind("orbit.goto",function(e,t){return s.shift(t)});this.$element.bind("orbit.start",function(e,t){return s.startClock()});this.$element.bind("orbit.stop",function(e,t){return s.stopClock()});r=this.$slides.filter("img");return r.length===0?this.loaded():r.bind("imageready",function(){i+=1;if(i===r.length)return s.loaded()})},loaded:function(){this.$element.addClass("orbit").css({width:"1px",height:"1px"});this.options.stackOnSmall&&this.$element.addClass("orbit-stack-on-small");this.$slides.addClass("orbit-slide").css({opacity:0});this.setDimentionsFromLargestSlide();this.updateOptionsIfOnlyOneSlide();this.setupFirstSlide();this.notifySlideChange();if(this.options.timer){this.setupTimer();this.startClock()}this.options.captions&&this.setupCaptions();this.options.directionalNav&&this.setupDirectionalNav();if(this.options.bullets){this.setupBulletNav();this.setActiveBullet()}this.options.afterLoadComplete.call(this);return e.run()},currentSlide:function(){return this.$slides.eq(this.activeSlide)},notifySlideChange:function(){var e,n;if(this.options.slideNumber){n=this.activeSlide+1+" of "+this.$slides.length;this.$element.trigger("orbit.change",{slideIndex:this.activeSlide,slideCount:this.$slides.length});if(this.$counter===undefined){e=t(this.slideNumberHTML).html(n);this.$counter=e;return this.$wrapper.append(this.$counter)}return this.$counter.html(n)}},setDimentionsFromLargestSlide:function(){var e,n;n=this;e=void 0;n.$element.add(n.$wrapper).width(this.$slides.first().outerWidth());n.$element.add(n.$wrapper).height(this.$slides.first().height());n.orbitWidth=this.$slides.first().outerWidth();n.orbitHeight=this.$slides.first().height();e=this.$slides.first().findFirstImage().clone();this.$slides.each(function(){var r,i,s;r=t(this);s=r.outerWidth();i=r.height();if(s>n.$element.outerWidth()){n.$element.add(n.$wrapper).width(s);n.orbitWidth=n.$element.outerWidth()}if(i>n.$element.height()){n.$element.add(n.$wrapper).height(i);n.orbitHeight=n.$element.height();e=t(this).findFirstImage().clone()}return n.numberSlides+=1});if(this.options.fluid){typeof this.options.fluid=="string"&&(e=t("<img>").attr("data-src","holder.js/"+this.options.fluid));n.$element.prepend(e);e.addClass("fluid-placeholder");n.$element.add(n.$wrapper).css({width:"inherit"});n.$element.add(n.$wrapper).css({height:"inherit"});return t(window).bind("resize",function(){n.orbitWidth=n.$element.outerWidth();return n.orbitHeight=n.$element.height()})}},lock:function(){return this.locked=!0},unlock:function(){return this.locked=!1},updateOptionsIfOnlyOneSlide:function(){if(this.$slides.length===1){this.options.directionalNav=!1;this.options.timer=!1;return this.options.bullets=!1}},setupFirstSlide:function(){var e;e=this;return this.$slides.first().css({"z-index":3,opacity:1}).fadeIn(function(){return e.$slides.css({display:"block"})})},startClock:function(){var e;e=this;if(!this.options.timer)return!1;if(this.$timer.is(":hidden"))return this.clock=setInterval(function(){return e.$element.trigger("orbit.next")},this.options.advanceSpeed);this.timerRunning=!0;this.$pause.removeClass("active");return this.clock=setInterval(this.rotateTimer,this.options.advanceSpeed/180,!1)},rotateTimer:function(e){var t;t="rotate("+this.degrees+"deg)";this.degrees+=2;this.$rotator.css({"-webkit-transform":t,"-moz-transform":t,"-o-transform":t,"-ms-transform":t});if(e){this.degrees=0;this.$rotator.removeClass("move");this.$mask.removeClass("move")}if(this.degrees>180){this.$rotator.addClass("move");this.$mask.addClass("move")}if(this.degrees>360){this.$rotator.removeClass("move");this.$mask.removeClass("move");this.degrees=0;return this.$element.trigger("orbit.next")}},stopClock:function(){if(!this.options.timer)return!1;this.timerRunning=!1;clearInterval(this.clock);return this.$pause.addClass("active")},setupTimer:function(){this.$timer=t(this.timerHTML);this.$wrapper.append(this.$timer);this.$rotator=this.$timer.find(".rotator");this.$mask=this.$timer.find(".mask");this.$pause=this.$timer.find(".pause");this.$timer.click(this.clickTimer);if(this.options.startClockOnMouseOut){this.$wrapper.mouseleave(this.startTimerAfterMouseLeave);this.$wrapper.mouseenter(this.clearClockMouseLeaveTimer)}if(this.options.pauseOnHover)return this.$wrapper.mouseenter(this.stopClock)},startTimerAfterMouseLeave:function(){var e;e=this;return this.outTimer=setTimeout(function(){if(!e.timerRunning)return e.startClock()},this.options.startClockOnMouseOutAfter)},clearClockMouseLeaveTimer:function(){return clearTimeout(this.outTimer)},clickTimer:function(){return this.timerRunning?this.stopClock():this.startClock()},setupCaptions:function(){this.$caption=t(this.captionHTML);this.$wrapper.append(this.$caption);return this.setCaption()},setCaption:function(){var e,n;n=this.currentSlide().attr("data-caption");e=void 0;if(!this.options.captions)return!1;if(n){if(t.trim(t(n).text()).length<1)return!1;n.charAt(0)==="#"&&(n=n.substring(1,n.length));e=t("#"+n).html();this.$caption.attr("id",n).html(e);switch(this.options.captionAnimation){case"none":return this.$caption.show();case"fade":return this.$caption.fadeIn(this.options.captionAnimationSpeed);case"slideOpen":return this.$caption.slideDown(this.options.captionAnimationSpeed)}}else switch(this.options.captionAnimation){case"none":return this.$caption.hide();case"fade":return this.$caption.fadeOut(this.options.captionAnimationSpeed);case"slideOpen":return this.$caption.slideUp(this.options.captionAnimationSpeed)}},setupDirectionalNav:function(){var e,n;n=this;e=t(this.directionalNavHTML);e.find(".right").html(this.options.directionalNavRightText);e.find(".left").html(this.options.directionalNavLeftText);this.$wrapper.append(e);this.$wrapper.find(".left").click(function(){n.stopClock();if(n.options.resetTimerOnClick){n.rotateTimer(!0);n.startClock()}return n.$element.trigger("orbit.prev")});return this.$wrapper.find(".right").click(function(){n.stopClock();if(n.options.resetTimerOnClick){n.rotateTimer(!0);n.startClock()}return n.$element.trigger("orbit.next")})},setupBulletNav:function(){this.$bullets=t(this.bulletHTML);this.$wrapper.append(this.$bullets);this.$slides.each(this.addBullet);this.$element.addClass("with-bullets");this.options.centerBullets&&this.$bullets.css("margin-left",-this.$bullets.outerWidth()/2);if(this.options.bulletThumbsHideOnSmall)return this.$bullets.addClass("hide-for-small")},addBullet:function(e,n){var r,i,s,o;i=e+1;r=t("<li>"+i+"</li>");o=void 0;s=this;if(this.options.bulletThumbs){o=t(n).attr("data-thumb");o&&r.addClass("has-thumb").css({background:"url("+this.options.bulletThumbLocation+o+") no-repeat"})}this.$bullets.append(r);r.data("index",e);return r.click(function(){s.stopClock();if(s.options.resetTimerOnClick){s.rotateTimer(!0);s.startClock()}return s.$element.trigger("orbit.goto",[r.data("index")])})},setActiveBullet:function(){return this.options.bullets?this.$bullets.find("li").removeClass("active").eq(this.activeSlide).addClass("active"):!1},resetAndUnlock:function(){this.$slides.eq(this.prevActiveSlide).css({"z-index":1});this.unlock();return this.options.afterSlideChange.call(this,this.$slides.eq(this.prevActiveSlide),this.$slides.eq(this.activeSlide))},shift:function(e){var n;n=e;this.prevActiveSlide=this.activeSlide;if(this.prevActiveSlide===n)return!1;if(this.$slides.length==="1")return!1;if(!this.locked){this.lock();if(e==="next"){this.activeSlide++;this.activeSlide===this.numberSlides&&(this.activeSlide=0)}else if(e==="prev"){this.activeSlide--;this.activeSlide<0&&(this.activeSlide=this.numberSlides-1)}else{this.activeSlide=e;this.prevActiveSlide<this.activeSlide?n="next":this.prevActiveSlide>this.activeSlide&&(n="prev")}this.setActiveBullet();this.notifySlideChange();this.$slides.eq(this.prevActiveSlide).css({"z-index":2});if(this.options.animation==="fade"){this.$slides.eq(this.activeSlide).css({opacity:0,"z-index":3}).animate({opacity:1},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).animate({opacity:0},this.options.animationSpeed)}if(this.options.animation==="horizontal-slide"){n==="next"&&this.$slides.eq(this.activeSlide).css({left:this.orbitWidth,"z-index":3}).css("opacity",1).animate({left:0},this.options.animationSpeed,this.resetAndUnlock);n==="prev"&&this.$slides.eq(this.activeSlide).css({left:-this.orbitWidth,"z-index":3}).css("opacity",1).animate({left:0},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).css("opacity",0)}if(this.options.animation==="vertical-slide"){if(n==="prev"){this.$slides.eq(this.activeSlide).css({top:this.orbitHeight,"z-index":3}).css("opacity",1).animate({top:0},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).css("opacity",0)}n==="next"&&this.$slides.eq(this.activeSlide).css({top:-this.orbitHeight,"z-index":3}).css("opacity",1).animate({top:0},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).css("opacity",0)}if(this.options.animation==="horizontal-push"){if(n==="next"){this.$slides.eq(this.activeSlide).css({left:this.orbitWidth,"z-index":3}).animate({left:0,opacity:1},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).animate({left:-this.orbitWidth},this.options.animationSpeed,"",function(){return t(this).css({opacity:0})})}if(n==="prev"){this.$slides.eq(this.activeSlide).css({left:-this.orbitWidth,"z-index":3}).animate({left:0,opacity:1},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).animate({left:this.orbitWidth},this.options.animationSpeed,"",function(){return t(this).css({opacity:0})})}}if(this.options.animation==="vertical-push"){if(n==="next"){this.$slides.eq(this.activeSlide).css({top:-this.orbitHeight,"z-index":3}).css("opacity",1).animate({top:0,opacity:1},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).css("opacity",0).animate({top:this.orbitHeight},this.options.animationSpeed,"")}if(n==="prev"){this.$slides.eq(this.activeSlide).css({top:this.orbitHeight,"z-index":3}).css("opacity",1).animate({top:0},this.options.animationSpeed,this.resetAndUnlock);this.$slides.eq(this.prevActiveSlide).css("opacity",0).animate({top:-this.orbitHeight},this.options.animationSpeed)}}this.setCaption()}if(this.activeSlide===this.$slides.length-1&&this.options.singleCycle)return this.stopClock()}};return t.fn.orbit=function(e){return this.each(function(){var r;r=t.extend({},n);return r.init(this,e)})}})(jQuery);(function(e){var t,n;t=function(t,n){var r;r=e(t);return r.bind("load.imageready",function(){n.apply(t,arguments_);return r.unbind("load.imageready")})};n={};return e.event.special.imageready={setup:function(e,t,r){return n=e||n},add:function(r){var i,s;i=e(this);s=void 0;if(this.nodeType===1&&this.tagName.toLowerCase()==="img"&&this.src!==""){if(n.forceLoad){s=i.attr("src");i.attr("src","");t(this,r.handler);return i.attr("src",s)}return this.complete||this.readyState===4?r.handler.apply(this,arguments_):t(this,r.handler)}},teardown:function(t){return e(this).unbind(".imageready")}}})(jQuery);e=e||{};(function(e,t){var n,r,i,s,o,u,a,f,l,c;r=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p;a="complete";c="readystatechange";h=!1;o=h;r=!0;u=e.document;n=u.documentElement;i=u.addEventListener?"addEventListener":"attachEvent";p=u.addEventListener?"removeEventListener":"detachEvent";s=u.addEventListener?"":"on";l=function(n){return(n.type!==c||u.readyState===a)&&((n.type==="load"?e:u)[p](s+n.type,l,h),!o&&(o=!0)&&t.call(e,null))};f=function(){try{n.doScroll("left")}catch(e){setTimeout(f,50);return}return l("poll")};if(u.readyState!==a){if(u.createEventObject&&n.doScroll){try{r=!e.frameElement}catch(d){}r&&f()}u[i](s+"DOMContentLoaded",l,h);u[i](s+c,l,h);return e[i](s+"load",l,h)}};l=function(e){var t,n;e=e.match(/^(\W)?(.*)/);t=document["getElement"+(e[1]?e[1]==="#"?"ById":"sByClassName":"sByTagName")](e[2]);n=[];t!=null&&(t.length?n=t:t.length===0?n=t:n=[t]);return n};o=function(e,t){var n,r,i;n={};for(r in e)n[r]=e[r];for(i in t)n[i]=t[i];return n};s=function(e,t,r){var i,s,o,u,a;i=[t.height,t.width].sort();s=Math.round(i[1]/16);o=Math.round(i[0]/16);a=Math.max(r.size,s);n.width=t.width;n.height=t.height;e.textAlign="center";e.textBaseline="middle";e.fillStyle=r.background;e.fillRect(0,0,t.width,t.height);e.fillStyle=r.foreground;e.font="bold "+a+"px sans-serif";u=r.text?r.text:t.width+"x"+t.height;Math.round(e.measureText(u).width)/t.width>1&&(a=Math.max(o,r.size));e.font="bold "+a+"px sans-serif";e.fillText(u,t.width/2,t.height/2,t.width);return n.toDataURL("image/png")};f=!1;u=!1;n=document.createElement("canvas");n.getContext?n.toDataURL("image/png").indexOf("data:image/png")<0?u=!0:i=n.getContext("2d"):u=!0;c={domain:"holder.js",images:"img",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12}}};e.flags={dimensions:{regex:/([0-9]+)x([0-9]+)/,output:function(e){var t;t=this.regex.exec(e);return{width:+t[1],height:+t[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(e){var t;t=this.regex.exec(e);return{size:c.themes.gray.size,foreground:"#"+t[2],background:"#"+t[1]}}},text:{regex:/text\:(.*)/,output:function(e){return this.regex.exec(e)[1]}}};for(a in e.flags)e.flags[a].match=function(e){return e.match(this.regex)};e.add_theme=function(t,n){t!=null&&n!=null&&(c.themes[t]=n);return e};e.add_image=function(t,n){var r,i,s,o;o=l(n);if(o.length){r=0;s=o.length;while(r<s){i=document.createElement("img");i.setAttribute("data-src",t);o[r].appendChild(i);r++}}return e};e.run=function(t){var n,r,a,h,p,d,v,m,g,y,b,w,E;m=o(c,t);p=l(m.images);f=!0;v=p.length;h=0;while(h<v){E=c.themes.gray;b=p[h].getAttribute("data-src")||p[h].getAttribute("src");if(b&&!!~b.indexOf(m.domain)){g=!1;n=null;w=null;a=b.substr(b.indexOf(m.domain)+m.domain.length+1).split("/");y=a.length;d=0;while(d<y){if(e.flags.dimensions.match(a[d])){g=!0;n=e.flags.dimensions.output(a[d])}else e.flags.colors.match(a[d])?E=e.flags.colors.output(a[d]):m.themes[a[d]]?E=m.themes[a[d]]:e.flags.text.match(a[d])&&(w=e.flags.text.output(a[d]));d++}if(g){p[h].setAttribute("data-src",b);r=n.width+"x"+n.height;p[h].setAttribute("alt",w?w:E.text?E.text+" ["+r+"]":r);p[h].style.backgroundColor=E.background;E=w?o(E,{text:w}):E;u||p[h].setAttribute("src",s(i,n,E))}}h++}return e};return r(t,function(){return f||e.run()})})(e,window)}).call(this);